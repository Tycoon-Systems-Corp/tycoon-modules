function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a,o=arguments[t];for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}import React from"react";import Link from"next/link";import{useRouter}from"next/router";import{v4 as uuidv4}from"uuid";import WatchPageStyles from"@tycoonsystems/tycoon-modules/streaming/watch/WatchPage.module.scss";import apiReq from"@tycoonsystems/tycoon-modules/utility/api/apiReq";import{CommentInternal}from"@tycoonsystems/tycoon-modules/comment";import{LoadComments}from"@tycoonsystems/tycoon-modules/comment/parts";import{resolveSimpleTimeAgo}from"@tycoonsystems/tycoon-modules/utility/utility/date";const Module=t=>{const a=useRouter()["query"],[o,n]=React.useState(!1),[,r]=React.useState(null);var[e,,]=React.useState(a.q);const[m,s]=React.useState(null);var[,,]=React.useState(0);const[c,i]=React.useState(!1),l=(React.useEffect(()=>{var e;o||(e=uuidv4(),r(e),l(),n(!0))},[o]),React.useEffect(()=>{!c&&t?._loggedIn?.identifier&&(i(!0),l())},[t?._loggedIn?.identifier,c]),async()=>{var e=await apiReq("/p/getpost",{id:a?.q,identifier:t?._loggedIn?.identifier,hash:t?._loggedIn?.hash});e?.data&&s(e.data)});return React.createElement("div",{className:t.className+" ThreadPage_Container"},React.createElement("div",{className:"PagePadding"},m?React.createElement("div",null,React.createElement("div",{className:"ThreadPage_op",style:{marginBottom:"1rem"}},React.createElement("div",{className:WatchPageStyles.opDataAuthorContainer+" Post_CommentDataAuthorContainer"},m?.author_data?.id?React.createElement(Link,{href:"/p?u="+m?.author_data?.id,style:{display:"block",maxWidth:"fit-content"}},React.createElement("div",null,m.author_data.username)):null,React.createElement("div",null,"â€¢"),React.createElement("div",{className:WatchPageStyles.commentDataAuthorContainerTime+" Post_CommentDataAuthorContainerTime"},resolveSimpleTimeAgo(m?.creation))),React.createElement("h2",{style:{marginTop:".25rem"}},m?.title),React.createElement("div",null,m?.contents)),React.createElement(CommentInternal,_extends({},t,{addComment:!0,commentUseParent:e,commentUseParentType:"post",pipe:"thread_comment",useId:m.id})),React.createElement(LoadComments,_extends({},t,{pipe:"thread_comment",commentUseParent:e,commentUseParentType:"post",useId:m.id,orderDir:"desc"}))):null))};export default Module;