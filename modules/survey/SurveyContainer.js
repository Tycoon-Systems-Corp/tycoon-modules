"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_Close=_interopRequireDefault(require("@mui/icons-material/Close")),_=require(".");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,a,u,o=[],i=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){c=!0,l=e}finally{try{if(!i&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw l}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var Module=function(t){var e,r=_slicedToArray(_react.default.useState(!1),2),n=r[0],l=r[1],r=_slicedToArray(_react.default.useState(!1),2),a=r[0],r=(r[1],_slicedToArray(_react.default.useState(null),2)),r=(r[0],r[1],_slicedToArray(_react.default.useState(!1),2)),u=r[0],r=(r[1],_slicedToArray(_react.default.useState(!1),2)),o=r[0],i=r[1],r=_slicedToArray(_react.default.useState(!1),2),c=r[0],s=r[1],d=_react.default.useRef(),f=_react.default.useRef(),m=(_react.default.useEffect(function(){n||(d.current.addEventListener("mouseover",m),l(!0))},[n]),function(){t._LocalEventEmitter.dispatch(null==t?void 0:t.handleName,{dispatch:"mouseOver"})}),r=(t._LocalEventEmitter.unsubscribe(null==t?void 0:t.handleName),t._LocalEventEmitter.subscribe(null==t?void 0:t.handleName,function(e){e&&(console.log("Notification Update",e),"mouseOver"===e.dispatch)&&(console.log("Did mouse over",t,c),(null==t||null==(e=t._openMenu)?void 0:e.currentMenu)===(null==t?void 0:t.handleName))&&!c&&t._toggleSingleOpenMenu&&t._toggleSingleOpenMenu(null,null==t?void 0:t.handleName,!0)}),_react.default.useEffect(function(){var e;(null==t||null==(e=t._openMenu)?void 0:e.currentMenu)!==(null==t?void 0:t.handleName)&&!u||o?(null==t||null==(e=t._openMenu)?void 0:e.currentMenu)!==(null==t?void 0:t.handleName)&&!u&&o&&(s(!0),e=setTimeout(function(){s(!1),i(!1),f.current=null},500),f.current=e):(i(!0),s(!1),null!=f&&f.current&&clearTimeout(f.current))},[null==t||null==(r=t._openMenu)?void 0:r.currentMenu,c,o,null==f?void 0:f.current]),_react.default.useCallback(function(e){s(!0),t._toggleSingleOpenMenu(null,null==t?void 0:t.handleName,!1)}));return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",{className:"Misc_Container Misc_Container_Bigger ".concat(t.className," ").concat(t.open||o&&!c?"Misc_Container_Visible":""),ref:d,style:{top:null!=t&&null!=(e=t.menuConfig)&&e.height&&!isNaN(Number(t.menuConfig.height))?Number(t.menuConfig.height)+"px":""}},t.open||o?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",{className:"".concat(a?"fetchNotBusy fetchBusy":"fetchNotBusy")}),_react.default.createElement("div",{style:{position:"sticky",top:".5rem",right:0,zIndex:10}},_react.default.createElement(_Close.default,{className:"Misc_Icon_Button",style:{margin:"0rem 0",position:"absolute",right:".5rem"},onClick:r})),_react.default.createElement("div",null,_react.default.createElement(_.Survey,_extends({survey:null==t?void 0:t.survey,height:250,close:r},t)))):null))},_default=exports.default=Module;