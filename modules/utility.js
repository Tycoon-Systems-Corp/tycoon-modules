"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.basicError=void 0,exports.generateComponent=generateComponent,exports.resolvePageName=exports.resolvePage=exports.resolveDefaults=exports.resolveComponent=exports.handlePropsPriority=exports.getServerSidePropsDefault=exports.getPropDefaults=void 0;var _react=_interopRequireDefault(require("react")),_app=_interopRequireWildcard(require("/app.config")),_watch=require("./streaming/watch"),_index=require("./onboarding/signin/index"),_index2=require("./profile/index"),_receipt=require("./ecommerce/receipt"),_index3=require("./payment/index"),_manager=require("./streaming/manager"),_feature=require("./search/feature"),_wideFeature=require("./search/wideFeature"),_indexing=require("./indexing"),_router=require("next/router"),_fetch=require("./utility/fetch"),_onboarding=require("./utility/onboarding"),_util=require("./util"),_settings=require("./settings"),_survey=require("./survey"),_customModules=_interopRequireDefault(require("/customModules")),_presentation=_interopRequireDefault(require("./presentation")),_eventPage=require("./presentation/events.js/eventPage"),_article=require("./article"),_product=require("./ecommerce/product");function _getRequireWildcardCache(e){var r,t;return"function"!=typeof WeakMap?null:(r=new WeakMap,t=new WeakMap,(_getRequireWildcardCache=function(e){return e?t:r})(e))}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};r=_getRequireWildcardCache(r);if(r&&r.has(e))return r.get(e);var t,n,a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&((n=o?Object.getOwnPropertyDescriptor(e,t):null)&&(n.get||n.set)?Object.defineProperty(a,t,n):a[t]=e[t]);return a.default=e,r&&r.set(e,a),a}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var u,i={},e=Object.prototype,c=e.hasOwnProperty,p=Object.defineProperty||function(e,r,t){e[r]=t.value},r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",t=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function o(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{o({},"")}catch(u){o=function(e,r,t){return e[r]=t}}function l(e,r,t,n){var a,o,i,l,r=r&&r.prototype instanceof g?r:g,r=Object.create(r.prototype),n=new R(n||[]);return p(r,"_invoke",{value:(a=e,o=t,i=n,l=f,function(e,r){if(l===h)throw new Error("Generator is already running");if(l===m){if("throw"===e)throw r;return{value:u,done:!0}}for(i.method=e,i.arg=r;;){var t=i.delegate;if(t){t=function e(r,t){var n=t.method,a=r.iterator[n];if(a===u)return t.delegate=null,"throw"===n&&r.iterator.return&&(t.method="return",t.arg=u,e(r,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;n=s(a,r.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,y;a=n.arg;return a?a.done?(t[r.resultName]=a.value,t.next=r.nextLoc,"return"!==t.method&&(t.method="next",t.arg=u),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}(t,i);if(t){if(t===y)continue;return t}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(l===f)throw l=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);l=h;t=s(a,o,i);if("normal"===t.type){if(l=i.done?m:d,t.arg===y)continue;return{value:t.arg,done:i.done}}"throw"===t.type&&(l=m,i.method="throw",i.arg=t.arg)}})}),r}function s(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}i.wrap=l;var f="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function g(){}function _(){}function v(){}var r={},b=(o(r,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(C([]))),w=(b&&b!==e&&c.call(b,n)&&(r=b),v.prototype=g.prototype=Object.create(r));function x(e){["next","throw","return"].forEach(function(r){o(e,r,function(e){return this._invoke(r,e)})})}function P(i,l){var r;p(this,"_invoke",{value:function(t,n){function e(){return new l(function(e,r){!function r(e,t,n,a){var o,e=s(i[e],i,t);if("throw"!==e.type)return(t=(o=e.arg).value)&&"object"==_typeof(t)&&c.call(t,"__await")?l.resolve(t.__await).then(function(e){r("next",e,n,a)},function(e){r("throw",e,n,a)}):l.resolve(t).then(function(e){o.value=e,n(o)},function(e){return r("throw",e,n,a)});a(e.arg)}(t,n,e,r)})}return r=r?r.then(e,e):e()}})}function q(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function E(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function C(r){if(r||""===r){var t,e=r[n];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length))return t=-1,(e=function e(){for(;++t<r.length;)if(c.call(r,t))return e.value=r[t],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(_typeof(r)+" is not iterable")}return p(w,"constructor",{value:_.prototype=v,configurable:!0}),p(v,"constructor",{value:_,configurable:!0}),_.displayName=o(v,a,"GeneratorFunction"),i.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o(e,a,"GeneratorFunction")),e.prototype=Object.create(w),e},i.awrap=function(e){return{__await:e}},x(P.prototype),o(P.prototype,t,function(){return this}),i.AsyncIterator=P,i.async=function(e,r,t,n,a){void 0===a&&(a=Promise);var o=new P(l(e,r,t,n),a);return i.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(w),o(w,a,"Generator"),o(w,n,function(){return this}),o(w,"toString",function(){return"[object Generator]"}),i.keys=function(e){var r,t=Object(e),n=[];for(r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},i.values=C,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&c.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=u),!!r}for(var r=this.tryEntries.length-1;0<=r;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var i=c.call(a,"catchLoc"),l=c.call(a,"finallyLoc");if(i&&l){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}var o=(a=a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc?null:a)?a.completion:{};return o.type=e,o.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function(e){for(var r=this.tryEntries.length-1;0<=r;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),E(t),y}},catch:function(e){for(var r=this.tryEntries.length-1;0<=r;--r){var t,n,a=this.tryEntries[r];if(a.tryLoc===e)return"throw"===(t=a.completion).type&&(n=t.arg,E(a)),n}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:C(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=u),y}},i}function asyncGeneratorStep(e,r,t,n,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void t(e)}l.done?r(u):Promise.resolve(u).then(n,a)}function _asyncToGenerator(l){return function(){var e=this,i=arguments;return new Promise(function(r,t){var n=l.apply(e,i);function a(e){asyncGeneratorStep(n,r,t,a,o,"next",e)}function o(e){asyncGeneratorStep(n,r,t,a,o,"throw",e)}a(void 0)})}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,r):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var resolveComponent=exports.resolveComponent=function(e){var r;if(e.type)switch(e.type){case"WatchPage":return _react.default.createElement(_watch.WatchPage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"SignIn":return _react.default.createElement(_index.SignIn,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"SignInPage":return _react.default.createElement(_index.SignInPage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"ProfilePage":return _react.default.createElement(_index2.ProfilePage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"ProductPage":return _react.default.createElement(_product.ProductPage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"EventPage":return _react.default.createElement(_eventPage.EventPage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"ReceiptPage":return _react.default.createElement(_receipt.ReceiptPage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"ArticlePage":return _react.default.createElement(_article.ArticlePage,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"CreditCard":return _react.default.createElement(_index3.CreditCard,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"Streaming_Manager":return _react.default.createElement(_manager.Manager,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"Onboarding_SignIn_Username":return _react.default.createElement(_index.Username,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"Feature":return _react.default.createElement(_feature.Feature,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"WideFeature":return _react.default.createElement(_wideFeature.WideFeature,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"SliderBasic":return _react.default.createElement(_indexing.SliderBasic,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"FetchHandler":return _react.default.createElement(_fetch.FetchHandler,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"Survey":return _react.default.createElement(_survey.Survey,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"Settings":return _react.default.createElement(_settings.Settings,e.props,e.children&&e.children.map?e.children.map(generateComponent):null);case"CustomModule":if(r="customModule",null!=e&&e.props&&e.props[r]&&_customModules.default&&Object.prototype.hasOwnProperty.call(_customModules.default,e.props[r])){var t=_customModules.default[e.props[r]];if(t)return _react.default.createElement(t,e.props,e.children&&e.children.map?e.children.map(generateComponent):null)}case"Presentation":if(r="module",null!=e&&e.props&&e.props[r]&&_presentation.default&&Object.prototype.hasOwnProperty.call(_presentation.default,e.props[r])){t=_presentation.default[e.props[r]];if(t)return _react.default.createElement(t,e.props,e.children&&e.children.map?e.children.map(generateComponent):null)}default:return null}return null},resolvePage=exports.resolvePage=function(e,t){return e&&e.temporaryComponents&&e.temporaryComponents.pages?e.temporaryComponents.pages.find(function(e){var r=e.url,r=new RegExp("^\\".concat(r,"(?:\\?.*)?$"));return!!(t&&t==e.url||r.test(t))||!!(global&&global.location&&global.location.pathname&&e.url===global.location.pathname||global&&global.location&&global.location.pathname&&r.test(global.location.pathname))})||{url:t}:null},resolvePageName=exports.resolvePageName=function(e){return"/"!==e?null!=e&&e.replace?e.replace("/",""):"":"index"};function generateComponent(e){if(e){var r=e.type,t=e.props,n=e.children;if(null!=t&&t.childrenBefore&&(a=t.childrenBefore&&t.childrenBefore.map(generateComponent),e.props.childrenBefore=[_react.default.createElement.apply(_react.default,[r,t].concat(_toConsumableArray(a)))]),null!=t&&t.childrenAfter&&(a=t.childrenAfter&&t.childrenAfter.map(generateComponent),e.props.childrenAfter=[_react.default.createElement.apply(_react.default,[r,t].concat(_toConsumableArray(a)))]),"string"==typeof r){var a=resolveComponent(e);if(a)return a;if(n&&n.map)return a=n&&n.map(generateComponent),_react.default.createElement.apply(_react.default,[r,t].concat(_toConsumableArray(a)))}if(r)return r}return e}var resolveDefaults=exports.resolveDefaults=function(){var l=_asyncToGenerator(_regeneratorRuntime().mark(function e(r,t,n,a,o,i,l){var u,c,p,s,f;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i(!0),u=!1,c={},p={},(p=a&&!(0,_util.isObjectEmpty)(a)?a:p).u||(p.u=(0,_onboarding.checkSignedIn)()&&(0,_onboarding.checkSignedIn)().username?(0,_onboarding.checkSignedIn)().username:null),p={url:o,params:p,domainKey:n.domainKey},"/p"!==r||t.profileData&&!l?"/w"!=r||t.watchData&&!l?"/r"==r?(u=!0,p.profileReq=!0,p.receiptReq=!0,(s=(0,_onboarding.checkSignedIn)())&&s.identifier&&s.hash&&(p.identifier=s.identifier,p.hash=s.hash)):"/e"===r?(u=!0,p.profileReq=!0,p.eventReq=!0):"/ar"===r?(u=!0,p.profileReq=!0,p.articleReq=!0):"/pr"===r?(u=!0,p.productReq=!0):"/admin"===r&&(u=!0):(u=!0,p.watchReq=!0,p.shopProfileReq=!0):(u=!0,p.profileReq=!0,p.shopProfileReq=!0),t.regionsData||(u=!0,p.regionsReq=!0),!0===u)return n.domainKey&&(p.domainKey=n.domainKey),e.next=13,(0,_fetch.fetchPost)(n.apiUrl+"/m/pagedefaults",null,null,p);e.next=15;break;case 13:(f=e.sent)&&f.data&&(c=Object.keys(f.data).reduce(function(e,r){return e[r]=f.data[r],e},c));case 15:return c._loggedIn=(0,_onboarding.checkSignedIn)(),e.abrupt("return",c);case 17:case"end":return e.stop()}},e)}));return function(e,r,t,n,a,o,i){return l.apply(this,arguments)}}(),handlePropsPriority=exports.handlePropsPriority=function(e,r){var t,n,a=(0,_util.isObjectEmpty)(e)?r:e;for(t in a)t.startsWith("_")&&(n=Object.getOwnPropertyDescriptor(a,t))&&n.writable&&(a[t]=r[t]);return a},basicError=exports.basicError={error:"failed",code:404},getServerSidePropsDefault=exports.getServerSidePropsDefault=function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(r,t){var n,a,o,i,l,u,c,p,s,f=arguments;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=2<f.length&&void 0!==f[2]?f[2]:{},a=3<f.length?f[3]:void 0,o={props:{data:{},profileData:null,params:{},resolvedDefinition:null,path:null,log:"",error:""}},i=(0,_app.resolveVariables)(),l=(0,_app.default)(i),l=resolvePage(l,r.req.url),o.props.path=r.req.url,u={url:r.req.url,params:r.query,domainKey:i.domainKey,serverReq:!0},c=!1,l&&"/p"===l.url?(c=!0,u.profileReq=!0,u.shopProfileReq=!0):l&&"/w"===l.url?(c=!0,u.watchReq=!0,u.shopProfileReq=!0):l&&"/e"===l.url?(c=!0,u.profileReq=!0,u.eventReq=!0):l&&"/ar"===l.url?(c=!0,u.profileReq=!0,u.articleReq=!0):l&&"/pr"===l.url?(c=!0,u.productReq=!0):l&&"/admin"===l.url?c=!0:l&&l.url.match("/documentation")&&(c=!0,u.documentationReq=!0),l&&l.data&&(o.props.resolvedDefinition=l.data),t)for(p=0;p<t.length;p++)c=!0,u[t[p]+"Req"]=!0;if(a&&(c=!0),Object.entries(n).map(function(e){u.params[e[0]]=e[1]}),c)return i.domainKey&&(u.domainKey=i.domainKey),e.next=18,(0,_fetch.fetchPost)(i.apiUrl+"/m/pagedefaults",null,null,u);e.next=20;break;case 18:(s=e.sent)&&s.data&&(o.props=Object.keys(s.data).reduce(function(e,r){return e[r]=s.data[r],e},o.props));case 20:return r&&r.query&&(o.props.params=r.query),!c||s&&"failed"!==s.status||(o.props.error=basicError),e.abrupt("return",o);case 23:case"end":return e.stop()}},e)}));return function(e,r){return t.apply(this,arguments)}}(),getPropDefaults=exports.getPropDefaults=function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function e(r,t,n){var a,o,i,l,u,c=arguments;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=3<c.length&&void 0!==c[3]?c[3]:{},o=(0,_app.resolveVariables)(),(0,_app.default)(o),!(Array.isArray(n)&&0<n.length)){e.next=13;break}for(i={url:t.req.url,params:Object.assign(t.query,a),domainKey:o.domainKey,serverReq:!0},l=0;l<n.length;l++)i[n[l]+"Req"]=!0;return e.next=8,(0,_fetch.fetchPost)(o.apiUrl+"/m/pagedefaults",null,null,i);case 8:return(u=e.sent)&&u.data&&(r.props=Object.keys(u.data).reduce(function(e,r){return e[r]=u.data[r],e},r.props)),e.abrupt("return",r);case 13:return e.abrupt("return",{});case 14:case"end":return e.stop()}},e)}));return function(e,r,t){return n.apply(this,arguments)}}();