import{resolveVariables}from"/app.config";const fetchPost=async(o,e,n,t={},s={})=>{e||s.formData||(e={Accept:"application/json","Content-Type":"application/json"}),n=n||resolveVariables().corsdefault;var i=t,n=(s.formData?(t.append("dborigin",resolveVariables().dborigin),t.has("domainKey")&&t.delete("domainKey"),t.append("domainKey",resolveVariables().domainKey)):(i.dborigin=resolveVariables().dborigin,i.domainKey=resolveVariables().domainKey),{method:"POST",cred:n,body:s.formData?t:JSON.stringify(i)});return e&&(n.headers=e),handleOutgoingRequests(!0,o),fetch(o,n).then(function(e){return handleOutgoingRequests(!1,o),e.json()}).then(e=>e).catch(e=>(handleOutgoingRequests(!1,o),console.log(e),e))},fetchGet=async(o,e,n,t)=>(e=e||{Accept:"application/json","Content-Type":"application/json"},n=n||resolveVariables().corsdefault,handleOutgoingRequests(!0,o),fetch(o,{method:"GET",headers:e,cred:n}).then(function(e){return handleOutgoingRequests(!1,o),e.json()}).then(e=>e).catch(e=>(handleOutgoingRequests(!1,o),e))),retrieveUrlParams=()=>new Proxy(new URLSearchParams(window.location.search),{get:(e,o)=>e.get(o)}),handleOutgoingRequests=(e,o)=>{try{window?.outgoingRequests||(window.outgoingRequests=[]),e?window.outgoingRequests.push(o):window.outgoingRequests.splice(window.outgoingRequests.indexOf(o),1)}catch(e){e?.message.match("window is not defined")||window.outgoingRequests.splice(window.outgoingRequests.indexOf(o),1)}};export{fetchPost,fetchGet,retrieveUrlParams};