import{fetchPost}from"@tycoonsystems/tycoon-modules/utility/fetch/fetch";import{logout}from"@tycoonsystems/tycoon-modules/utility/onboarding/SignIn.js";import mails from"/layout/mail";import apiReq from"@tycoonsystems/tycoon-modules/utility/api/apiReq";const sendSurveyEmail=async(t,e,i,s,a)=>{e={domainKey:e,hash:a?.hash,identifier:a?.identifier,answers:i,surveyName:s},a=await fetchPost(t+"/m/sendsurveyemail",null,null,e);if(a&&a.hasOwnProperty("status")){if("disauthenticated"==a.status)return logout(),"disauthenticated";if("failed"==a.status)return!1;if("success"==a.status)return a}return!1},handleEventMail=async(t,e)=>{var i,s=t?.event??t?.action??t?.detail?.event??null;if(s)try{mails&&mails[s]&&(i=await mails[s](e,t),console.log("Attempting to send",i),i)&&await apiReq("/email/sendEmail",{toEmail:i?.toEmail??null,toUserId:i?.toUserId??t?.data?.identifier,tousername:i?.toUsername??null,content:i.content,subject:i.subject})}catch(t){console.log(t)}};export{sendSurveyEmail,handleEventMail};