import{fetchPost}from"../fetch/fetch";import{logout}from"/modules/utility/onboarding/SignIn.js";import newUser from"/layout/mail/newUser";import mails from"/layout/mail";import apiReq from"/modules/utility/api/apiReq";const sendSurveyEmail=async(e,t,i,a,n)=>{t={domainKey:t,hash:n?.hash,identifier:n?.identifier,answers:i,surveyName:a},console.log(e,t),n=await fetchPost(e+"/m/sendsurveyemail",null,null,t);if(n&&n.hasOwnProperty("status")){if("disauthenticated"==n.status)return logout(),"disauthenticated";if("failed"==n.status)return!1;if("success"==n.status)return n}return!1},handleEventMail=async(e,t)=>{var i,a=e?.event??e?.action??null;a&&("newUser"===a&&(i=newUser(t),await apiReq("/email/sendEmail",{toUserId:e?.data?.identifier,content:i.content,subject:i.subject})),mails[a])&&(i=mails[a](t),await apiReq("/email/sendEmail",{toUserId:e?.data?.identifier,content:i.content,subject:i.subject}))};export{sendSurveyEmail,handleEventMail};