let vast=null;const handleLoadIMA=(e,n)=>{if(vast=n)console.log("Window",window,e),"undefined"!=typeof window&&window?.google?loadIMA(e):setTimeout(()=>{handleLoadIMA(e)},1e3);else try{window.imaAdManagerDidLoad=!0}catch(e){}},loadIMA=e=>{var n,o,t,i,s=!1,a=document.getElementById(e);function d(e){console.log("ad container clicked"),console.log(i),a.paused?i.resume():i.pause()}function l(e){window.imaPlaying=!0,console.log("Ad Started!"),n?.classList.contains("no_pointer_events")&&n.classList.remove("no_pointer_events"),a.classList.contains("no_pointer_events")||a.classList.add("no_pointer_events")}function r(e){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),a.classList.contains("no_pointer_events")&&a.classList.remove("no_pointer_events")}function c(e){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),a.classList.contains("no_pointer_events")&&a.classList.remove("no_pointer_events")}function g(e){console.log("Loaded",e,a),window.imaAdManagerDidLoad=!0,(i=e.getAdsManager(a)).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,E),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,L),i.addEventListener(google.ima.AdEvent.Type.LOADED,A),i.addEventListener(google.ima.AdEvent.Type.AD_STARTED,l),i.addEventListener(google.ima.AdEvent.Type.AD_STOPPED,r),i.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,c)}function v(e){console.log(e?.getError()),i?.destroy&&i.destroy()}function E(){n?.classList.contains("no_pointer_events")&&n.classList.remove("no_pointer_events"),a.pause()}function L(){n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),a.play()}function A(e){e=e.getAd();console.log("Ad!",e),e.isLinear()||a.play()}console.log("Video Element",a,e),console.log("Initializing IMA",a),google?.ima?.AdDisplayContainer&&((n=document.getElementById("ad-container")).addEventListener("click",d),o=new google.ima.AdDisplayContainer(n,a),(t=new google.ima.AdsLoader(o)).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,g,!1),t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v,!1),a.addEventListener("ended",function(){t.contentComplete()}),(e=new google.ima.AdsRequest).adTagUrl=vast,e.linearAdSlotWidth=a.clientWidth,e.linearAdSlotHeight=a.clientHeight,e.nonLinearAdSlotWidth=a.clientWidth,e.nonLinearAdSlotHeight=a.clientHeight/3,console.log("Running request for ads",e),t.requestAds(e)),a.addEventListener("play",function(e){if(!s){s=!0,e.preventDefault(),console.log("loading ads",a),a.load(),o.initialize();var e=a.clientWidth,n=a.clientHeight;try{i.init(e,n,google.ima.ViewMode.NORMAL),i.start()}catch(e){console.log("AdsManager could not be started"),a.play()}}}),window.addEventListener("resize",function(e){console.log("window resized")}),window.addEventListener("resize",function(e){var n,o;console.log("window resized"),i?.resize&&(n=a.clientWidth,o=a.clientHeight,i.resize(n,o,google.ima.ViewMode.NORMAL))})};export{handleLoadIMA};