let vast=null;const handleLoadIMA=(e,n)=>{if(vast=n)console.log("Window",window,e),"undefined"!=typeof window&&window?.google?loadIMA(e):setTimeout(()=>{handleLoadIMA(e)},1e3);else try{window.imaAdManagerDidLoad=!0}catch(e){}},loadIMA=e=>{var t,n,o,i,s,a=!1;function d(e){console.log("ad container clicked"),console.log(s),t.paused?s.resume():s.pause()}function l(e){window.imaPlaying=!0,console.log("Ad Started!"),n?.classList.contains("no_pointer_events")&&n.classList.remove("no_pointer_events"),t.classList.contains("no_pointer_events")||t.classList.add("no_pointer_events")}function r(e){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),t.classList.contains("no_pointer_events")&&t.classList.remove("no_pointer_events")}function c(e){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),t.classList.contains("no_pointer_events")&&t.classList.remove("no_pointer_events")}function g(e){console.log("Loaded",e,t),window.imaAdManagerDidLoad=!0,(s=e.getAdsManager(t)).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v),s.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,E),s.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,L),s.addEventListener(google.ima.AdEvent.Type.LOADED,A),s.addEventListener(google.ima.AdEvent.Type.AD_STARTED,l),s.addEventListener(google.ima.AdEvent.Type.AD_STOPPED,r),s.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,c)}function v(e){console.log(e?.getError()),s?.destroy&&s.destroy()}function E(){n?.classList.contains("no_pointer_events")&&n.classList.remove("no_pointer_events"),t.pause()}function L(){n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),t.play()}function A(e){e=e.getAd();console.log("Ad!",e),e.isLinear()||t.play()}t=document.getElementById(e),console.log("Video Element",t,e),console.log("Initializing IMA",t),(n=document.getElementById("ad-container")).addEventListener("click",d),o=new google.ima.AdDisplayContainer(n,t),(i=new google.ima.AdsLoader(o)).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,g,!1),i.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v,!1),t.addEventListener("ended",function(){i.contentComplete()}),(e=new google.ima.AdsRequest).adTagUrl=vast,e.linearAdSlotWidth=t.clientWidth,e.linearAdSlotHeight=t.clientHeight,e.nonLinearAdSlotWidth=t.clientWidth,e.nonLinearAdSlotHeight=t.clientHeight/3,console.log("Running request for ads",e),i.requestAds(e),t.addEventListener("play",function(e){if(!a){a=!0,e.preventDefault(),console.log("loading ads",t),t.load(),o.initialize();var e=t.clientWidth,n=t.clientHeight;try{s.init(e,n,google.ima.ViewMode.NORMAL),s.start()}catch(e){console.log("AdsManager could not be started"),t.play()}}}),window.addEventListener("resize",function(e){console.log("window resized")}),window.addEventListener("resize",function(e){var n,o;console.log("window resized"),s?.resize&&(n=t.clientWidth,o=t.clientHeight,s.resize(n,o,google.ima.ViewMode.NORMAL))})};export{handleLoadIMA};