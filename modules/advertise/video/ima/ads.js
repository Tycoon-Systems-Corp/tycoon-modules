let vast=null;const handleLoadIMA=(e,n)=>{if(vast=n)console.log("Window",window,e),"undefined"!=typeof window&&window?.google?loadIMA(e):setTimeout(()=>{handleLoadIMA(e)},1e3);else try{window.imaAdManagerDidLoad=!0}catch(e){}},loadIMA=e=>{var n,o,t,i,a=!1,s=document.getElementById(e);function d(e){console.log("ad container clicked"),console.log(i,s),s.paused?i.resume():i.pause()}function l(e){A(),window.imaPlaying=!0,console.log("Ad Started!"),n?.classList.contains("no_pointer_events")&&n.classList.remove("no_pointer_events"),s.classList.contains("no_pointer_events")||s.classList.add("no_pointer_events")}function r(e){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),s.classList.contains("no_pointer_events")&&s.classList.remove("no_pointer_events")}function c(e){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),s.classList.contains("no_pointer_events")&&s.classList.remove("no_pointer_events")}function g(e){console.log("Loaded",e,s),window.imaAdManagerDidLoad=!0,(i=e.getAdsManager(s)).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,E),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,L),i.addEventListener(google.ima.AdEvent.Type.LOADED,_),i.addEventListener(google.ima.AdEvent.Type.AD_STARTED,l),i.addEventListener(google.ima.AdEvent.Type.AD_STOPPED,r),i.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,c)}function v(e){console.log(e?.getError()),i?.destroy&&i.destroy()}function E(){window.imaPlaying=!0,n?.classList.contains("no_pointer_events")&&n.classList.remove("no_pointer_events"),A(),s.pause()}function L(){window.imaPlaying=!1,n?.classList.contains("no_pointer_events")||n.classList.add("no_pointer_events"),A(),console.log("VideoEleme",s),s.play()}function A(){try{let e;console.log("vol",s.volume,i.volume,s,i),Object.prototype.hasOwnProperty.call(s,"volume")&&(e=s.volume),null!=(e=s.muted?0:e)&&i.setVolume(e)}catch(e){}}function _(e){e=e.getAd();console.log("Ad!",e,e?.isLinear()),A(),e.isLinear()||s.play()}console.log("Video Element",s,e),console.log("Initializing IMA",s),google?.ima?.AdDisplayContainer&&((n=document.getElementById("ad-container")).addEventListener("click",d),o=new google.ima.AdDisplayContainer(n,s),(t=new google.ima.AdsLoader(o)).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,g,!1),t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v,!1),s.addEventListener("ended",function(){t.contentComplete()}),(e=new google.ima.AdsRequest).adTagUrl=vast,e.linearAdSlotWidth=s.clientWidth,e.linearAdSlotHeight=s.clientHeight,e.nonLinearAdSlotWidth=s.clientWidth,e.nonLinearAdSlotHeight=s.clientHeight/3,console.log("Running request for ads",e),t.requestAds(e)),s.addEventListener("play",function(e){if(!a){a=!0,e.preventDefault(),console.log("loading ads",s),s.load(),o?.initialize&&o.initialize();var e=s.clientWidth,n=s.clientHeight;try{i.init(e,n,google.ima.ViewMode.NORMAL),i.start(),window.imaPlaying=!0,A()}catch(e){console.log("AdsManager could not be started"),s.play()}}}),window.addEventListener("resize",function(e){console.log("window resized")}),window.addEventListener("resize",function(e){var n,o;i?.resize&&(n=s.clientWidth,o=s.clientHeight,i.resize(n,o,google.ima.ViewMode.NORMAL))})};export{handleLoadIMA};