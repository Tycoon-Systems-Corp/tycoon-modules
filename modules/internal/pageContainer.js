import React from"react";import{useRouter}from"next/router";import resolveConfig,{pageDefaults}from"/app.config";import{basicError,generateComponent,handlePropsPriority,resolvePage,resolvePageName,getServerSidePropsDefault,resolveDefaults}from"/modules/utility.js";import{isObjectEmpty}from"/modules/util";import{Menu}from"/modules/menu/";import{constructGeneral,paintMeta}from"./meta/general";import middlewareFunctions from"/customModules/middleware/MiddlewareFunctions";const PageContainer=t=>{var e=useRouter();const{query:a,asPath:o}=e,[r,n]=React.useState(!1),[s,l]=React.useState({});t.resolvedDefinition;let i=resolvePage(resolveConfig(t._configVariables,t),t.path);i&&i.data;const p=async e=>{var e=await resolveDefaults(i.url,t,t._configVariables,a,o,n,e);isObjectEmpty(e)||(e=Object.assign({...t},e),l(e))};t._LocalEventEmitter.unsubscribe("refetchDefaults"),t._LocalEventEmitter.subscribe("refetchDefaults",e=>{p(!0)}),React.useEffect(()=>{i&&i.url&&!r&&isObjectEmpty(s)&&p()},[r,s,i]);var c=handlePropsPriority(s,t),u=(g=(i=resolvePage(resolveConfig(t._configVariables,c),c.path))&&i.data,generateComponent(g)),m=!g||g?.props&&!Object.prototype.hasOwnProperty.call(g.props,"useMenu")||g.props?.useMenu,g=!g||g?.props&&!Object.prototype.hasOwnProperty.call(g.props,"useAppConfigLayout")||g.props?.useAppConfigLayout;const f=Object.assign({},c);f.useMenu=m,f.useAppConfigLayout=g;m=React.createElement("div",{className:c.pageName+"_Body "+(t.pageClass??""),style:{top:c.menuConfig.height?c.menuConfig.height+"px":"",position:"relative"}},u),f.useAppConfigLayout&&(f.appConfigLayout=m),g=React.Children.map(t.children,function(e){return null!==e?"function"==typeof e.type?React.cloneElement(e,f):e:React.createElement("div")}),c="/ar"===i?.url;let d=constructGeneral(e,pageProps);return middlewareFunctions?.transformMeta&&(d=middlewareFunctions.transformMeta(e,d,pageProps)),React.createElement(React.Fragment,null,React.createElement(Head,null,React.createElement("title",null,pageProps.siteTitle),pageProps?.googleClientId?React.createElement("meta",{name:"google-signin-client_id",content:""+pageProps.googleClientId}):null,paintMeta(d)),React.createElement("div",{className:c?"Article_SafeStyles":""},g))};export default PageContainer;