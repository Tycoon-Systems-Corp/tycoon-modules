"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(require("react")),_uuid=require("uuid"),_dompurify=_interopRequireDefault(require("dompurify")),_ArticleModule=_interopRequireDefault(require("./Article.module.scss")),_templates=_interopRequireDefault(require("./templates")),_layout=require("/layout");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,l,u,n,i=[],o=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(a=u.call(r)).done)&&(i.push(a.value),i.length!==t);o=!0);}catch(e){c=!0,l=e}finally{try{if(!o&&null!=r.return&&(n=r.return(),Object(n)!==n))return}finally{if(c)throw l}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var Module=function(t){var e=_slicedToArray(_react.default.useState(!1),2),e=(e[0],e[1],_slicedToArray(_react.default.useState(!1),2)),r=e[0],a=e[1],e=_slicedToArray(_react.default.useState(null),2),l=e[0],u=e[1],e=_slicedToArray(_react.default.useState(null),2),n=e[0],i=e[1],e=_slicedToArray(_react.default.useState(null),2),o=e[0],c=e[1],e=_slicedToArray(_react.default.useState("basic"),2),s=e[0],f=e[1],e=_react.default.useRef();t._LocalEventEmitter.unsubscribe(l),t._LocalEventEmitter.subscribe(l,function(e){e&&"loadDefault"!==e.dispatch&&e.dispatch}),_react.default.useEffect(function(){var e;r||(e=(0,_uuid.v4)(),u(e),a(!0))},[r]),_react.default.useEffect(function(){var e;null!=n&&null!=(e=n.meta)&&e.template?f(n.meta.template):null!=t&&t.selectTemplate&&f(t.selectTemplate)},[null==t?void 0:t.selectTemplate,n]),_react.default.useEffect(function(){var e;null!=t&&t.articleData&&(!n||null!=n&&n.id&&null!=t&&null!=(e=t.articleData)&&e.id&&n.id!==t.articleData.id)&&(i(t.articleData),t.articleData.contents)&&(e=JSON.parse(t.articleData.contents))&&c(e)},[null==t?void 0:t.articleData,n]);l=Object.assign(_templates.default,null!=(l=null==t?void 0:t.articleTemplates)?l:{}),s=s&&l&&l[s];return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_layout.Article,_extends({},t,{useTemplates:l,template:s,articleHtml:o,articleData:n,createMarkup:function(){return{__html:_dompurify.default.sanitize(null!=o?o:"")}},htmlRef:e,ArticleStyles:_ArticleModule.default})))},_default=exports.default=Module;