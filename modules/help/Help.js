import React from"react";import lunr from"../utility/utility/elasticlunr";import Styles from"../settings/Settings.module.scss";import Close from"@mui/icons-material/Close";const Module=t=>{const[e,a]=React.useState(!1);var[,,]=React.useState(!1),[,,]=React.useState(null),[,,]=React.useState(!0);const[n,l]=React.useState(!1),[r,s]=React.useState(!1),[,i]=React.useState(-1),[c,o]=React.useState(null),[m,u]=React.useState([]),p=React.useRef(),d=React.useRef();React.useEffect(()=>{e||a(!0)},[e]),e&&lunr&&t.helpIndex&&!c&&(R=lunr(function(){this.ref("id"),this.field("question"),this.field("answer"),this.field("a"),this.field("meta"),Array.isArray(t.helpIndex)&&t.helpIndex.forEach((e,t)=>{e.id=t,this.add(e)})}),o(R)),React.useEffect(()=>{var e;t?.open?(l(!0),s(!0),p?.current&&clearTimeout(p.current)):t&&t?.open||(s(!0),l(!1),e=setTimeout(()=>{s(!1),d?.current&&(d.current.value=""),p.current=null},1500),p.current=e)},[r,n,t?.open,p?.current,d?.current]);var R=React.useCallback(e=>{i((new Date).getTime());e=e?.currentTarget?.value;if(console.log(e),null!==e&&""!==e&&c&&t.helpIndex){e=c.search(e,{expand:!0});const a=t.helpIndex.map((e,t)=>(e.id=t,e));console.log(a,e);e=e.map(t=>a.find(e=>e.id==t.ref));u(e)}else f()}),g=React.useCallback(e=>{t?.setHelpOpen&&t.setHelpOpen(!1)});const f=()=>{var e;d?.current&&t?.helpIndex?.filter&&((e=d.current.value)&&""!==e||0<(e=t.helpIndex.filter(e=>e.pinned)).length&&u(e))};return React.useEffect(()=>{f()},[c]),React.useEffect(()=>{console.log(t._openMenu),"main_settings"!==t?._openMenu?.currentMenu&&t?.setHelpOpen&&t.setHelpOpen(!1)},[t?._openMenu?.currentMenu,t?.setHelpOpen]),React.createElement("div",null,React.createElement("div",{className:`Misc_Container Help_Container ${t.className} `+(n&&r?"Misc_Container_Visible":""),style:{top:t?.menuConfig?.height&&!isNaN(Number(t.menuConfig.height))?Number(t.menuConfig.height)+"px":""}},React.createElement("div",{className:"Misc_Internal_Container Help_Internal_Container",style:{paddingTop:".5rem"}},React.createElement("div",{className:"Help_CloseButtonContainer",style:{position:"sticky",top:".5rem",right:0,zIndex:10}},React.createElement(Close,{className:Styles.Close+" Help_CloseButton",style:{margin:"0rem 0",float:"right"},onClick:g})),React.createElement("h5",{className:"Misc_Label Help_Label",style:{marginTop:0}},"Help"),React.createElement("div",{className:"Help_InputSearchContainer",style:{position:"sticky",top:".5rem",margin:".5rem 0",marginTop:"0"}},React.createElement("input",{className:"Help_InputSearch",onChange:R,ref:d,style:{border:"0px",borderRadius:".5rem",width:"87.5%",fontSize:"1.25rem",padding:"0 .5rem"},placeholder:"How can we help?"})),React.createElement("div",{className:"Help_ResultsContainer",style:{padding:".25rem 0rem",display:"grid",gap:".5rem"}},Array.isArray(m)&&0<m.length?m.map((e,t)=>e?.a?React.createElement("a",{className:"Help_ResultLink",href:e.a,style:{cursor:"pointer"},key:t},React.createElement("div",{className:"Misc_Item_Container Misc_Item_DarkContainerHover Help_ResultContainer",style:{padding:".5rem",display:"grid",gap:".25rem"}},React.createElement("div",{className:"Help_Question",style:{fontWeight:"500"}},e.question),React.createElement("div",{className:"Help_Answer",style:{fontSize:".85rem",lineHeight:"normal"}},e.answer),e.jsx?React.createElement("div",{className:"Help_JsxContainer"},e.jsx):null)):React.createElement("div",{className:"Misc_Item_Container Help_ResultContainer",style:{padding:".5rem",display:"grid",gap:".25rem"},key:t},React.createElement("div",{className:"Help_Question",style:{fontWeight:"500"}},e.question),React.createElement("div",{className:"Help_Answer",style:{fontSize:".85rem",lineHeight:"normal"}},e.answer),e.jsx?React.createElement("div",{className:"Help_JsxContainer"},e.jsx):null)):""!==d?.current?.value?React.createElement("div",null):React.createElement("div",{style:{textAlign:"center",fontSize:".95rem"}},"Try Searching for something")))))};export default Module;